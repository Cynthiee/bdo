{% extends 'base.html' %}
{% block content %}
  <h2>Pending Transactions</h2>
  <table class="table-auto w-full border-collapse">
    <thead>
      <tr class="bg-gray-100">
        <th class="px-4 py-2 border">ID</th>
        <th class="px-4 py-2 border">Account</th>
        <th class="px-4 py-2 border">User</th>
        <th class="px-4 py-2 border">Type</th>
        <th class="px-4 py-2 border">Amount</th>
        <th class="px-4 py-2 border">Requested At</th>
        <th class="px-4 py-2 border">Actions</th>
      </tr>
    </thead>
    <tbody>
    {% for tx in pending_transactions %}
      <tr class="hover:bg-gray-50">
        <td class="px-4 py-2 border text-sm">{{ tx.transaction_id }}</td>
        <td class="px-4 py-2 border text-sm">{{ tx.account.account_number }}</td>
        <td class="px-4 py-2 border text-sm">{{ tx.account.owner.username }}</td>
        <td class="px-4 py-2 border text-sm">{{ tx.transaction_type|title }}</td>
        <td class="px-4 py-2 border text-sm">â‚¦{{ tx.amount }}</td>
        <td class="px-4 py-2 border text-sm">{{ tx.timestamp|date:"Y-m-d H:i" }}</td>
        <td class="px-4 py-2 border text-sm space-x-2">
          <a href="{% url 'admin_approve_transaction' tx.transaction_id %}"
             class="px-2 py-1 bg-green-500 text-white rounded"
             onclick="return confirm('Approve transaction {{ tx.transaction_id }}?');">
            Approve
          </a>
          <a href="{% url 'admin_reject_transaction' tx.transaction_id %}"
             class="px-2 py-1 bg-red-500 text-white rounded"
             onclick="return confirm('Reject transaction {{ tx.transaction_id }}?');">
            Reject
          </a>
        </td>
      </tr>
    {% empty %}
      <tr>
        <td colspan="7" class="px-4 py-2 text-center text-gray-500">
          No pending transactions.
        </td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
{% endblock %}
